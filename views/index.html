<!DOCTYPE html>

<html>
   <head>
      <title>File Metadata</title>
      <link rel="shortcut icon" href="https://cdn.freecodecamp.org/universal/favicons/favicon-32x32.png" type="image/x-icon"/>
      <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css">
      <link href="/public/style.css" rel="stylesheet" type="text/css">
   </head>

   <body>
      <div class="container">
        <h1>API Project: File Metadata Microservice</h1>

        <h2>Usage:</h2>
        <p>
          Please Upload a File ...
        </p>
        <div class="view">
          <h4>Result:</h4>
          <pre id="output"></pre> <!-- This shows pretty json -->

          <form enctype="multipart/form-data" method="POST" action="/api/fileanalyse">
            <input id="inputfield" type="file" name="upfile">
            <br>
            <input id="button" type="submit" value="Upload">
          </form>
        </div>
      </div>
      <div class="footer">
        <p>
          by 
          <a href="#">RJDevelopment</a>
        </p>
      </div>

      <script>
        const form = document.querySelector('form');
        const output = document.getElementById('output');

        form.addEventListener('submit', async (e) => {
          e.preventDefault();
          const formData = new FormData(form);

          try {
            const response = await fetch('/api/fileanalyse', {
              method: 'POST',
              body: formData
            });
            const data = await response.json();
            output.textContent = JSON.stringify(data, null, 2);
          } catch (error) {
            output.textContent = 'Error: ' + error.message;
          }
        });
      </script>

   </body>
</html>
